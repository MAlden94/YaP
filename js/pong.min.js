if(typeof jQuery==="undefined"){document.write('<script src="http://code.jquery.com/jquery-2.1.1.min.js"><\/script>')}(function(a){a.fn.doublekeypress=function(e,b){var c=null;var d=0;if(!a.isNumeric(b)){b=600}return this.each(function(){a(this).keypress(function(h){var f=h.which;if(f==c){var g=Date.now();if(g-d<=b){c=null;g=0;return e(h)}d=g}c=f})})}})(jQuery);var Pong=function(){Pong=function(){return a};window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(g,e){window.setTimeout(g,1000/60)};if(!window.cancelAnimationFrame){window.cancelAnimationFrame=clearTimeout}var a=new Object();a.Privates=new Object();a.Privates.OldInputMethod=null;a.Privates.InputMethods=[];a.Privates.InputMethodNames={mousemove:"Mouse",keydown:"Keyboard",touchstart:"Touch",touchmove:"Drag",deviceorientation:"Gyroscope"};a.Privates.LatestFrameLatency=0;a.Privates.SafeFrameLatency=300;a.Privates.title=document.title;a.Privates.Blinker=null;a.Privates.FrameID=null;a.Privates.AI_Error=0;a.Privates.AI_Depth=0;a.Privates.p1_hit=false;a.Privates.p2_hit=false;a.Privates.P1InitSize=100;a.Privates.P2InitSize=100;a.Privates.ball_vy=5;a.Privates.ball_vx=5;a.Settings=new Object();a.Settings.Level=5;a.Settings.Player1Velocity=10;a.Settings.Player2Velocity=10;a.Settings.AI_difficulty=50;a.Settings.AI_player=2;a.Settings.degreeOfMotion=2;a.Settings.GyroOffset=[0,0];a.Settings.InputMethod="deviceorientation";a.Settings.DualPaddles=false;a.Settings.InvertControls=false;a.Settings.AutoLevelUp=true;a.Settings.Interactive=false;a.Settings.Menu=false;a.Settings.Paused=false;a.Settings.ForcedPause=false;a.Settings.MenuOnInteractiveReturn=false;a.Settings.LevelChangesPaddleSize=true;a.Settings.link_velocity_of_players=true;a.Settings.FixBoundaryBug=false;a.Functions=new Object();$(window).resize(function(){a.Privates.window_height=$(window).height();a.Privates.window_width=$(window).width()}).resize();$("body").append('<div id="PongTable"></div>');$("#PongTable").append('<span id="P1Score">0</span>');$("#PongTable").append('<span id="P2Score">0</span>');$("#PongTable").append('<span id="P1" title="I can has turn?"></span>');$("#PongTable").append('<span id="P2" title="Muahahaha!"></span>');$("#PongTable").append('<span id="Ball" title="Ouch!"></span>');a.Privates.$p1_score=$("#PongTable #P1Score");a.Privates.$p2_score=$("#PongTable #P2Score");a.Privates.$p1=$("#PongTable #P1");a.Privates.$p2=$("#PongTable #P2");a.Privates.$ball=$("#PongTable #Ball");a.Privates.P1InitSize=parseInt(a.Privates.$p1.css("height"));a.Privates.P2InitSize=parseInt(a.Privates.$p2.css("height"));$.each(a.Privates.InputMethodNames,function(e,g){if("on"+e in window){if(e=="deviceorientation"){var h=function(j){if(j.alpha==null||j.beta==null||j.gamma==null){$('#PongTable #_InputMethod option[value="'+e+'"]').remove();if(e==a.Settings.InputMethod){a.Settings.InputMethod="mousemove"}}window.removeEventListener(e,h,false)};window.addEventListener(e,h,false)}a.Privates.InputMethods.push(e)}});$("#PongTable").dblclick(function(){if(a.Settings.Interactive){$("#pong_interactive_toggle").mouseup()}}).on("doubletap",function(){$("#PongTable").dblclick()});$("#pong_btn_group").css("display","inline");$("#pong_pause_toggle").css("display","inline").mouseup(function(){a.Settings.ForcedPause=(a.Settings.Paused=!a.Settings.Paused);$(window).off("focus",a.Functions.focus);if(!a.Settings.Paused){$(window).on("focus",a.Functions.focus);a.Settings.Menu=false}a.Functions.Update()});$("#pong_interactive_toggle").css("display","inline").mouseup(function(e){a.Settings.Interactive=!a.Settings.Interactive;if(!a.Settings.Interactive){a.Settings.Menu=true}a.Functions.toggleMenu()});a.Functions.blur=function(){if(a.Settings.Menu||a.Settings.ForcedPause){return}a.Settings.Paused=true;a.Functions.Update();$(window).off("blur",a.Functions.blur)};a.Functions.focus=function(){if(a.Settings.Menu||a.Settings.ForcedPause){return}a.Settings.Paused=false;a.Functions.Update();$(window).on("blur",a.Functions.blur)};$(window).on("focus",a.Functions.focus);if(!a.Settings.FixBoundaryBug){for(i=0;i<=(a.Privates.window_height/2)&&!a.Settings.FixBoundaryBug;i++){a.Privates.$ball.css("top",i+"px");a.Settings.FixBoundaryBug=(a.Privates.window_height-parseInt(a.Privates.$ball.css("top"))-parseInt(a.Privates.$ball.css("height"))!=parseInt(a.Privates.$ball.css("bottom")))}}if(a.Settings.FixBoundaryBug){}a.Privates.$ball.css("left",a.Privates.window_width/2+"px");a.Privates.$ball.css("top",a.Privates.window_height/2+"px");$("#PongTable").append('<div id="Menu">	<table>	  <tr>	      <td></td>	      <td><span id="blink" style="display: inline; text-align: center">Click outside the menu to close.</span></td>	      <td></td>	  </tr>	</table>	<table>	  <tr>	      <td>Level </td>	      <td><input id="_Level" max="100" min="1" type="number"></td>	      <td></td>	  </tr>	    <tr>		<td>		<select id="_AI_player">		    <option value="0">CPU: Off</option>		    <option value="2">CPU: P2</option>		    <option value="1">CPU: P1</option>		</select>		</td>		<td><input id="_AI_difficulty" max="100" min="0" type="number"></td>		<td>% difficulty</td>		<td></td>	    </tr>	    <tr>		<td>Input method</td>		<td id="degreeOfMotionlabel" style="display: none">&deg; Of Motion</td>		<td></td>	    </tr>	    <tr>	    <td><select id="_InputMethod"></select></td>	    <td><input id="_degreeOfMotion" max="360" min="0" type="number" style="display: none"></td>	    <td><button id="Calibrate">Calibrate</button></td>	    </td>	</table>	<table class="PlayerVelocity" style="display: none">	    <tr>		<td>P1</td>		<td></td>		<td>P2</td>	    </tr>	    <tr>		<td><input id="_Player1Velocity" max="100" min="1" type="number"></td>		<td><input id="_link_velocity_of_players" type="checkbox"></td>		<td><input id="_Player2Velocity" max="100" min="1" type="number"></td>		<td>velocity</td>	    </tr>	</table>	<hr>	<table>	<tr>	<td></td>	<td>	<input id="_DualPaddles"    type="checkbox">Dual Paddles<br>	<input id="_InvertControls" type="checkbox">Invert Controls<br>	<input id="_AutoLevelUp"    type="checkbox">Automatically Level up<br>	<input id="_Interactive"    type="checkbox">Interactive<br>	<input id="_Paused"         type="checkbox">Paused<br>	</td>	<td></td>	</tr>	</table>	<table>	<td><a id="ResetScores"   href="#">Reset scores</a></td>	<td>&nbsp;</td>	<td><a id="ResetSettings" href="#">Default settings</a></td>	</tr>	</table>	<table>	<tr>	<td></td>	<td>+/-: Level | A/Z: P1 | J/M: P2 | <a id="Info" href="#">Info</a></td>	<td></td>	</tr>	</table>	</div><div id="About">Copyright (C) 2012-2016 Mitchell Lafferty &lt;<a href="http://linuxrules94.users.sf.net/">http://linuxrules94.users.sf.net/</a>&gt; <coolspeedy6 at gmail dot com><br>	Released under the GNU GPL.<br>	Please read the source code for more info. (pong.js)<br>	<a id="MyBitcoin" href="bitcoin:16tpxvjpPKhMUGhZkRU9s9UhuKZMuFBVfz?label=Donations%20Address%20for%20linuxrules94"><em>Bitcoin donations :)</em></a></div>');$.each(a.Privates.InputMethods,function(e,g){$("#PongTable #_InputMethod").append($("<option/>",{value:g,text:(a.Privates.InputMethodNames[g]!==undefined)?a.Privates.InputMethodNames[g]:g}))});$("#PongTable").find("#_AI_player, #_degreeOfMotion, #_AI_difficulty").change(function(){a.Settings[this.id.substr(1)]=parseInt(this.value)}).keyup(function(){$(this).change()});$("#PongTable #_InputMethod").change(function(){$("#PongTable").find(".PlayerVelocity, #_degreeOfMotion, #degreeOfMotionlabel, #Calibrate").hide();switch(this.value){case"deviceorientation":$("#PongTable").find("#_degreeOfMotion, #degreeOfMotionlabel, #Calibrate").show();break;case"keydown":$("#PongTable .PlayerVelocity").show();break;default:if(a.Privates.InputMethodNames[this.value]==undefined){$(this).val(a.Settings.InputMethod)}break}a.Settings.InputMethod=this.value});$("#PongTable").find("#_Level, #_Player1Velocity, #_Player2Velocity").change(function(){a.Settings[this.id.substr(1)]=this.value=($.isNumeric(this.value))?this.value:a.Settings[this.id.substr(1)];if(a.Settings.link_velocity_of_players){switch(this.id){case"_Player1Velocity":if(a.Settings.link_velocity_of_players){$("#PongTable #_Player2Velocity").val(a.Settings.Player2Velocity=a.Settings.Player1Velocity)}return;case"_Player2Velocity":if(a.Settings.link_velocity_of_players){$("#PongTable #_Player1Velocity").val(a.Settings.Player1Velocity=a.Settings.Player2Velocity)}return;case"_Level":a.Functions.UpdateLevel(2);return}}}).keyup(function(){$(this).change()});$('#PongTable input[type="checkbox"]').click(function(){a.Settings[this.id.substr(1)]=this.checked;switch(this.id){case"_Paused":if(this.checked){a.Settings.Menu=false;a.Functions.Update()}return;case"_DualPaddles":$("#PongTable #_AI_player").attr("disabled",this.checked);return}});$("#PongTable").find("#Calibrate, #ResetScores, #ResetSettings, #Info").click(function(e){e.preventDefault();switch(this.id){case"Calibrate":if($("#PongTable #Calibrate").text().indexOf("Confirm")!=-1){$("#PongTable #Calibrate").text("Calibrate")}else{$("#PongTable #Calibrate").text("Confirm")}return;case"ResetScores":a.Privates.$p1_score.add(a.Privates.$p2_score).text(0);return;case"ResetSettings":localStorage.clear();location.reload();return;case"Info":$("#About").slideToggle(1000);return}});$("#PongTable").find("#Menu, #About").each(function(){$(this).css({"margin-left":-$(this).outerWidth()/2+"px","margin-top":-$(this).outerHeight()/2+"px"}).click(function(e){e.stopPropagation();if(this.id=="About"){$(this).fadeOut(1000)}}).fadeOut(0)});$("#PongTable #Menu").dblclick(function(e){e.stopPropagation()}).on("doubletap",function(e){e.stopPropagation()});$("body").click(function(e){if($(e.target).is("a, button, span")){return}if(a.Settings.Menu){a.Functions.toggleMenu();$("#PongTable #About").fadeOut(1000)}});if(typeof Storage!=="undefined"){for(param in a.Settings){if(localStorage[param]===undefined){continue}try{a.Settings[param]=JSON.parse(localStorage[param])}catch(d){}}}$(document).keypress(function(e){a.Functions.GlobalKeyboardHandler(e)});$(document).doublekeypress(function(e){if(e.which==112){a.Functions.toggleMenu()}});a.Functions.Update=function(){if(a.Settings.Menu){$("#PongTable #_Level").val(a.Settings.Level);$("#PongTable #_Player1Velocity").val(a.Settings.Player1Velocity);$("#PongTable #_Player2Velocity").val(a.Settings.Player2Velocity);$("#PongTable #_AI_difficulty").val(a.Settings.AI_difficulty);$("#PongTable #_AI_player").val(a.Settings.AI_player);$("#PongTable #_InputMethod").val(a.Settings.InputMethod).change();$("#PongTable #_degreeOfMotion").val(a.Settings.degreeOfMotion);$("#PongTable #_DualPaddles").attr("checked",a.Settings.DualPaddles);$("#PongTable #_AutoLevelUp").attr("checked",a.Settings.AutoLevelUp);$("#PongTable #_Interactive").attr("checked",a.Settings.Interactive);$("#PongTable #_Paused").attr("checked",false);$("#PongTable #_AI_player").attr("disabled",a.Settings.DualPaddles);$("#PongTable #_link_velocity_of_players").attr("checked",a.Settings.link_velocity_of_players);$("#PongTable #Menu").slideDown(1000);if(!a.Privates.Blinker){a.Privates.Blinker=setInterval(function(){$("#PongTable #blink").fadeToggle(500)},500)}}else{clearInterval(a.Privates.Blinker);a.Privates.Blinker=null;$("#PongTable #Calibrate").text("Calibrate");$("#PongTable #Menu, #About").fadeOut(500)}a.Functions.UpdateLevel(2);$("#pong_menu_toggle").text((a.Settings.Menu?"close":"open")+" pong menu");$("#pong_pause_toggle").text((a.Settings.Paused?"play":"pause")+" pong");$("#pong_interactive_toggle").text((a.Settings.Interactive?"quit":"start")+" pong");if(a.Settings.Interactive){if(a.Settings.MenuOnInteractiveReturn){a.Settings.Menu=true}if(!$("#PongTable").hasClass("interactive")){$("#PongTable").addClass("interactive")}}else{$("#PongTable").removeClass("interactive")}switch(a.Privates.OldInputMethod){case"deviceorientation":case"touchstart":case"touchend":case"touchmove":window.removeEventListener(a.Settings.InputMethod,a.Functions.EventHandler);break;default:$(window).off(a.Privates.OldInputMethod,a.Functions.EventHandler)}if(jQuery.inArray(a.Settings.InputMethod,a.Privates.InputMethods)==-1){a.Settings.InputMethod=a.Privates.InputMethods[0]}if(a.Settings.Interactive){a.Privates.OldInputMethod=a.Settings.InputMethod;switch(a.Privates.OldInputMethod){case"deviceorientation":case"touchstart":case"touchend":case"touchmove":window.addEventListener(a.Settings.InputMethod,a.Functions.EventHandler);break;default:$(window).on(a.Settings.InputMethod,a.Functions.EventHandler)}}if(a.Settings.DualPaddles){a.Settings.AI_player=0}if(!a.Settings.Paused){if(!a.Privates.FrameID){a.Privates.FrameID=window.requestAnimationFrame(a.Functions._newframe)}}else{if(a.Settings.ForcedPause){a.Privates.$ball.css({top:50+"px",left:20+"px",});a.Privates.$p2.css("top",a.Privates.window_height-parseInt(a.Privates.$p2.css("height")))}window.cancelAnimationFrame(a.Privates.FrameID);a.Privates.FrameID=null}if(typeof Storage!=="undefined"){for(param in a.Settings){try{localStorage[param]=JSON.stringify(a.Settings[param])}catch(g){}}}};a.Functions.toggleMenu=function(){a.Settings.Paused=(a.Settings.Menu=!a.Settings.Menu);if(a.Settings.Menu){a.Settings.Interactive=true;if($("#pong_scroll_to").length){window.scrollTo(0,$("#pong_scroll_to").position().top)}else{if($("#pong_btn_group").length){window.scrollTo(0,$("#pong_btn_group").position().top)}else{window.scrollTo(0,$("#pong_interactive_toggle").position().top)}}}a.Functions.Update();return a.Settings.Menu};a.Functions.UpdateLevel=function(e){switch(e){case 0:a.Settings.Level++;break;case 1:a.Settings.Level--;break;default:}a.Settings.Level=f(a.Settings.Level,1,100);a.Privates.ball_vy=(a.Privates.ball_vy<0?-1:1)*a.Settings.Level;a.Privates.ball_vx=(a.Privates.ball_vx<0?-1:1)*a.Settings.Level;if(a.Settings.LevelChangesPaddleSize){a.Privates.$p1.css("height",f(Math.ceil(a.Privates.P1InitSize-((a.Settings.Level*2.5)/100)*a.Privates.P1InitSize),15,a.Privates.P1InitSize)+"px");a.Privates.$p2.css("height",f(Math.ceil(a.Privates.P2InitSize-((a.Settings.Level*2.5)/100)*a.Privates.P2InitSize),15,a.Privates.P2InitSize)+"px")}if(a.Settings.Interactive){document.title="Pong Level: "+a.Settings.Level}else{document.title=a.Privates.title}};a.Functions._newframe=function(){if(!a.Settings.Paused){window.requestAnimationFrame(a.Functions._newframe)}var j=(new Date()).getMilliseconds();if(a.Settings.FixBoundaryBug){a.Privates.$p1.css("bottom",(a.Privates.window_height-parseInt(a.Privates.$p1.css("top")))-parseInt(a.Privates.$p1.css("height"))+"px");a.Privates.$p2.css("bottom",(a.Privates.window_height-parseInt(a.Privates.$p2.css("top")))-parseInt(a.Privates.$p2.css("height"))+"px");a.Privates.$ball.css("bottom",(a.Privates.window_height-parseInt(a.Privates.$ball.css("top")))-parseInt(a.Privates.$ball.css("height"))+"px");a.Privates.$ball.css("right",(a.Privates.window_width-parseInt(a.Privates.$ball.css("left")))-parseInt(a.Privates.$ball.css("width"))+"px")}ball_top=parseInt(a.Privates.$ball.css("top"));ball_bottom=parseInt(a.Privates.$ball.css("bottom"));ball_left=parseInt(a.Privates.$ball.css("left"));ball_right=parseInt(a.Privates.$ball.css("right"));p1_top=parseInt(a.Privates.$p1.css("top"));p1_bottom=parseInt(a.Privates.$p1.css("bottom"));p1_left=parseInt(a.Privates.$p1.css("left"));p1_width=parseInt(a.Privates.$p1.css("width"));p1_height=parseInt(a.Privates.$p1.css("height"));p2_top=parseInt(a.Privates.$p2.css("top"));p2_bottom=parseInt(a.Privates.$p2.css("bottom"));p2_right=parseInt(a.Privates.$p2.css("right"));p2_width=parseInt(a.Privates.$p2.css("width"));p2_height=parseInt(a.Privates.$p2.css("height"));if(!a.Settings.Interactive){a.Settings.AI_player=(a.Privates.ball_vx<0)?1:2}if((a.Settings.AI_player==1&&a.Privates.ball_vx<0&&ball_left<a.Privates.AI_Depth)||(a.Settings.AI_player==2&&a.Privates.ball_vx>0&&ball_right<a.Privates.AI_Depth)){var g=1;var e=a.Privates.$p1;if(a.Settings.AI_player==1){if(a.Settings.InputMethod=="keydown"){g=a.Settings.Player1Velocity}}else{if(a.Settings.InputMethod=="keydown"){g=a.Settings.Player2Velocity}e=a.Privates.$p2}if(a.Settings.DualPaddles){e=a.Privates.$p1.add(a.Privates.$p2)}var h=ball_top-((parseInt($(e).css("height"))/2)+a.Privates.AI_Error)*(a.Privates.ball_vy<0?-1:1);if(a.Privates.ball_vy<0){for(i=parseInt($(e).css("top"));i>=h;i-=g){$(e).css("top",i+"px")}}else{for(i=parseInt($(e).css("top"));i<=h;i+=g){$(e).css("top",i+"px")}}if(parseInt($(e).css("top"))+parseInt($(e).css("height"))>a.Privates.window_height){$(e).css("top",(a.Privates.window_height-parseInt($(e).css("height")))+"px")}if(parseInt($(e).css("top"))<0){$(e).css("top","0px")}}if(ball_top<=Math.abs(a.Privates.ball_vy)||ball_bottom<=Math.abs(a.Privates.ball_vy)){a.Privates.ball_vy*=-1}if(!a.Privates.p2_hit&&ball_top+Math.abs(a.Privates.ball_vy)>=p2_top&&ball_bottom+Math.abs(a.Privates.ball_vy)>=p2_bottom&&ball_right-Math.abs(a.Privates.ball_vx)<=p2_right+p2_width){if(!a.Settings.DualPaddles){a.Privates.$p2_score.text(parseInt(a.Privates.$p2_score.text())+1)}else{a.Privates.$p1_score.text(parseInt(a.Privates.$p1_score.text())+1)}a.Privates.ball_vx*=-1;if(a.Settings.AI_player==2||!a.Settings.Interactive){a.Functions.SetAI_Error(p1_height)}a.Privates.p1_hit=false;a.Privates.p2_hit=true;if(a.Settings.AutoLevelUp&&!(parseInt(a.Privates.$p1_score.text())^5)){a.Functions.UpdateLevel(0)}}else{if(ball_right<=Math.abs(a.Privates.ball_vx)){if(a.Settings.AI_player==2||!a.Settings.Interactive){a.Functions.SetAI_Error(p2_height)}if(!a.Settings.DualPaddles){a.Privates.$p1_score.text(parseInt(a.Privates.$p1_score.text())+1)}else{a.Privates.$p2_score.text(parseInt(a.Privates.$p2_score.text())+1)}ball_left=a.Privates.window_width/2;ball_top=a.Privates.window_height/2;a.Privates.p1_hit=false;a.Privates.p2_hit=false;if(a.Settings.AutoLevelUp){a.Functions.UpdateLevel(a.Settings.Level=0)}}}if(!a.Privates.p1_hit&&ball_top+Math.abs(a.Privates.ball_vy)>=p1_top&&ball_bottom+Math.abs(a.Privates.ball_vy)>=p1_bottom&&ball_left-Math.abs(a.Privates.ball_vx)<=p1_left+p1_width){a.Privates.$p1_score.text(parseInt(a.Privates.$p1_score.text())+1);a.Privates.ball_vx*=-1;if(a.Settings.AI_player==1||!a.Settings.Interactive){a.Functions.SetAI_Error(p2_height)}a.Privates.p1_hit=true;a.Privates.p2_hit=false;if(a.Settings.AutoLevelUp&&!(parseInt(a.Privates.$p1_score.text())^5)){a.Functions.UpdateLevel(0)}}else{if(ball_left<=Math.abs(a.Privates.ball_vx)){if(a.Settings.AI_player==1||!a.Settings.Interactive){a.Functions.SetAI_Error(p1_height)}a.Privates.$p2_score.text(parseInt(a.Privates.$p2_score.text())+1);ball_left=a.Privates.window_width/2;ball_top=a.Privates.window_height/2;if(a.Settings.AutoLevelUp){a.Functions.UpdateLevel(a.Settings.Level=0)}a.Privates.p1_hit=false;a.Privates.p2_hit=false}}ball_top+=a.Privates.ball_vy;ball_left+=a.Privates.ball_vx;a.Privates.$ball.css({top:ball_top+"px",left:ball_left+"px",});if((a.Privates.LatestFrameLatency=(new Date()).getMilliseconds()-j)>a.Privates.SafeFrameLatency){if(a.Settings.Interactive){a.Settings.Interactive=false;alert("Pong has been paused because it may freeze or slow down browser. Consider upgrading browser or computer if possible.")}else{}$("#pong_pause_toggle").mouseup()}};a.Functions.SetAI_Error=function(e){a.Privates.AI_Error=Math.random()*(2*e*(1-(a.Settings.AI_difficulty/100)))*(Math.random()>0.5?1:-1);a.Privates.AI_Depth=Math.random()*a.Privates.window_width*(a.Settings.AI_difficulty/100)};a.Functions.EventHandler=function(e){if(!a.Settings.Interactive||e.type!=a.Settings.InputMethod){return}switch(e.type){case"keydown":return a.Functions.KeyboardHandler(e);case"mousemove":case"onwheel":return a.Functions.MouseHandler(e);case"touchstart":case"touchmove":case"touchend":return a.Functions.TouchHandler(e);case"deviceorientation":return a.Functions.deviceorientationHandler(e)}};a.Functions.deviceorientationHandler=function(g){if(g.gamma==null||g.beta==null){$('#PongTable #_InputMethod option[value="deviceorientation"]').remove();a.Settings.InputMethod="mousemove";a.Functions.Update();return true}if($("#PongTable #Calibrate").text().indexOf("Confirm")!=-1){index=(Math.abs(window.orientation)==90)+0;a.Settings.GyroOffset[index]=index?g.gamma:g.beta;$("#PongTable #Calibrate").text("Confirm ["+b(parseInt(a.Settings.GyroOffset[index]),4)+"]");return}if(a.Settings.DualPaddles){var e=a.Privates.$p1.add(a.Privates.$p2)}else{var e=(a.Settings.AI_player==2)?a.Privates.$p1:a.Privates.$p2}e.css("top",c(f((Math.abs(window.orientation)==90)?(g.gamma-a.Settings.GyroOffset[1])*((a.Settings.InvertControls)?-1:1):(g.beta-a.Settings.GyroOffset[0])*((a.Settings.InvertControls)?-1:1),-a.Settings.degreeOfMotion,a.Settings.degreeOfMotion),-a.Settings.degreeOfMotion,a.Settings.degreeOfMotion,0,(a.Privates.window_height-parseInt(e.css("height"))))+"px");return true};a.Functions.TouchHandler=function(g){if(g.type=="touchmove"){g.preventDefault()}var e=null;if(a.Settings.DualPaddles){e=a.Privates.$p1.add(a.Privates.$p2)}else{if(a.Settings.AI_player>0){e=(a.Settings.AI_player==2)?a.Privates.$p1:a.Privates.$p2}else{e=(g.touches[0].pageX<a.Privates.window_width/2)?a.Privates.$p1:a.Privates.$p2}}e.css("top",f((g.touches[0].pageY-$(document).scrollTop())-(parseInt(e.css("height"))/2),0,(a.Privates.window_height-parseInt(e.css("height"))))+"px");return true};a.Functions.MouseHandler=function(g){if(a.Settings.DualPaddles){var e=a.Privates.$p1.add(a.Privates.$p2)}else{if(a.Settings.AI_player>0){e=(a.Settings.AI_player==2)?a.Privates.$p1:a.Privates.$p2}else{e=(g.pageX<a.Privates.window_width/2)?a.Privates.$p1:a.Privates.$p2}}var h=(a.Settings.InvertControls)?a.Privates.window_height-(g.pageY-$(document).scrollTop()):g.pageY-$(document).scrollTop();e.css("top",f(Math.round(h-(parseInt(e.css("height"))/2)),0,a.Privates.window_height-parseInt(e.css("height")))+"px");return true};a.Functions.KeyboardHandler=function(e){p1_top=parseInt(a.Privates.$p1.css("top"));p1_bottom=parseInt(a.Privates.$p1.css("bottom"));p2_top=parseInt(a.Privates.$p2.css("top"));p2_bottom=parseInt(a.Privates.$p2.css("bottom"));switch(e.which){case 65:if(a.Settings.AI_player==1){return}if(p1_top>0){p1_top-=a.Settings.Player1Velocity}break;case 90:if(a.Settings.AI_player==1){return}if(p1_bottom>0){p1_top+=a.Settings.Player1Velocity}break;case 74:if(a.Settings.AI_player==2){return}if(p2_top>0){p2_top-=a.Settings.Player2Velocity}break;case 77:if(a.Settings.AI_player==2){return}if(p2_bottom>0){p2_top+=a.Settings.Player2Velocity}break}if(a.Settings.DualPaddles){p1_top=p2_top}a.Privates.$p1.css({top:p1_top+"px",});a.Privates.$p2.css({top:p2_top+"px",});return true};a.Functions.GlobalKeyboardHandler=function(e){if(!a.Settings.Interactive){return}switch(e.which){case 43:case 61:a.Functions.UpdateLevel(0);break;case 45:a.Functions.UpdateLevel(1);break}return true};function f(h,g,e){if(h<g){return g}else{if(h>e){return e}}return h}function c(h,g,k,e,j){return(h-g)*(j-e)/(k-g)+e}function b(g,e){g=g.toString();return g.length<e?b(g+" ",e):g}a.Functions.Update();return a};